services:
  taskflow-app:
    image: $FULL_IMAGE
    container_name: taskflow-app
    restart: unless-stopped

    networks:
      - traefik_net

    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=traefik_net"

      # HTTPS
      - "traefik.http.routers.taskflow.rule=Host(`taskflow-app.rickdan.ddns-ip.net`)"
      - "traefik.http.routers.taskflow.entrypoints=websecure"
      - "traefik.http.routers.taskflow.tls.certresolver=myresolver"

      # SERVICE â†’ port interne du conteneur
      - "traefik.http.services.taskflow.loadbalancer.server.port=80"

networks:
  traefik_net:
    external: true